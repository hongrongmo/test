<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright ©2016 LexisNexis Univentio, The Netherlands. -->
<lexisnexis-patent-document schema-version="1.13" date-produced="20160127" file="US20150257708A1.xml" produced-by="LexisNexis-Univentio" lang="eng" date-inserted="20150917" time-inserted="030233" date-changed="20160120" time-changed="080826">
  <bibliographic-data lang="eng">
    <publication-reference publ-type="Application" publ-desc="Patent Application Publication">
      <document-id id="121316570">
        <country>US</country>
        <doc-number>20150257708</doc-number>
        <kind>A1</kind>
        <date>20150917</date>
      </document-id>
    </publication-reference>
    <application-reference appl-type="utility">
      <document-id>
        <country>US</country>
        <doc-number>14320994</doc-number>
        <date>20140701</date>
      </document-id>
    </application-reference>
    <application-series-code>14</application-series-code>
    <language-of-filing>eng</language-of-filing>
    <language-of-publication>eng</language-of-publication>
    <dates-of-public-availability date-changed="20150924">
      <unexamined-printed-without-grant>
        <date>20150917</date>
      </unexamined-printed-without-grant>
    </dates-of-public-availability>
    <classifications-ipcr date-changed="20160120">
      <classification-ipcr sequence="1">
        <text>A61B   5/00        20060101AFI20150917BHUS        </text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>A</section>
        <class>61</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20150917</date>
        </action-date>
        <generating-office>
          <country>US</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>A61B   5/026       20060101ALI20150917BHUS        </text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>A</section>
        <class>61</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>026</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20150917</date>
        </action-date>
        <generating-office>
          <country>US</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>A61B   5/0295      20060101ALI20150917BHUS        </text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>A</section>
        <class>61</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>0295</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20150917</date>
        </action-date>
        <generating-office>
          <country>US</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H03K   5/1252      20060101ALI20150917BHUS        </text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>03</class>
        <subclass>K</subclass>
        <main-group>5</main-group>
        <subgroup>1252</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20150917</date>
        </action-date>
        <generating-office>
          <country>US</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-ipcr>
    </classifications-ipcr>
    <classifications-cpc date-changed="20160120">
      <classification-cpc sequence="1">
        <text>H03K   5/1252      20130101 FI20160111BHEP        </text>
        <cpc-version-indicator>
          <date>20130101</date>
        </cpc-version-indicator>
        <section>H</section>
        <class>03</class>
        <subclass>K</subclass>
        <main-group>5</main-group>
        <subgroup>1252</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20160111</date>
        </action-date>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-cpc>
      <classification-cpc sequence="2">
        <text>A61B   5/02427     20130101 LI20160108BHEP        </text>
        <cpc-version-indicator>
          <date>20130101</date>
        </cpc-version-indicator>
        <section>A</section>
        <class>61</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>02427</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20160108</date>
        </action-date>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-cpc>
      <classification-cpc sequence="3">
        <text>A61B   5/7225      20130101 LI20160108BHEP        </text>
        <cpc-version-indicator>
          <date>20130101</date>
        </cpc-version-indicator>
        <section>A</section>
        <class>61</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>7225</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <action-date>
          <date>20160108</date>
        </action-date>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
      </classification-cpc>
    </classifications-cpc>
    <number-of-claims calculated="yes">19</number-of-claims>
    <invention-title id="title_eng" date-changed="20150917" lang="eng" format="original">DIGITALLY ASSISTED ANALOG DYNAMIC RANGE ENHANCER</invention-title>
    <related-documents date-changed="20150917">
      <provisional-application>
        <document-id>
          <country>US</country>
          <doc-number>61952623</doc-number>
          <date>20140313</date>
        </document-id>
      </provisional-application>
    </related-documents>
    <parties date-changed="20150917">
      <applicants>
        <applicant sequence="1" app-type="applicant" designation="us-only">
          <addressbook lang="eng">
            <last-name>Winokur</last-name>
            <first-name>Eric Steven</first-name>
            <address>
              <city>Danvers</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
          <residence>
            <country>US</country>
          </residence>
        </applicant>
        <applicant sequence="2" app-type="applicant" designation="us-only">
          <addressbook lang="eng">
            <last-name>Sodini</last-name>
            <first-name>Charles G.</first-name>
            <address>
              <city>Belmont</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
          <residence>
            <country>US</country>
          </residence>
        </applicant>
        <applicant sequence="3" app-type="applicant" designation="us-only">
          <addressbook lang="eng">
            <last-name>O'Dwyer</last-name>
            <first-name>Tom</first-name>
            <address>
              <city>Arlington</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
          <residence>
            <country>US</country>
          </residence>
        </applicant>
      </applicants>
      <inventors>
        <inventor sequence="1" designation="us-only">
          <addressbook lang="eng">
            <last-name>Winokur</last-name>
            <first-name>Eric Steven</first-name>
            <address>
              <city>Danvers</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
        </inventor>
        <inventor sequence="2" designation="us-only">
          <addressbook lang="eng">
            <last-name>Sodini</last-name>
            <first-name>Charles G.</first-name>
            <address>
              <city>Belmont</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
        </inventor>
        <inventor sequence="3" designation="us-only">
          <addressbook lang="eng">
            <last-name>O'Dwyer</last-name>
            <first-name>Tom</first-name>
            <address>
              <city>Arlington</city>
              <state>MA</state>
              <country>US</country>
            </address>
          </addressbook>
        </inventor>
      </inventors>
    </parties>
    <patent-family date-changed="20150917">
      <main-family family-id="173670629">
        <family-member>
          <document-id>
            <country>US</country>
            <doc-number>20150257708</doc-number>
            <kind>A1</kind>
            <date>20150917</date>
          </document-id>
          <application-date>
            <date>20140701</date>
          </application-date>
        </family-member>
      </main-family>
      <complete-family family-id="173670621">
        <family-member>
          <document-id>
            <country>US</country>
            <doc-number>20150257708</doc-number>
            <kind>A1</kind>
            <date>20150917</date>
          </document-id>
          <application-date>
            <date>20140701</date>
          </application-date>
        </family-member>
      </complete-family>
    </patent-family>
  </bibliographic-data>
  <abstract id="abstr_eng" date-changed="20150917" lang="eng" format="original">
    <p id="p-a-00001-en" num="0000">A circuit for expanding a dynamic range. In one embodiment, the circuit includes: a transducer generating a signal current on an output terminal in response to a physical quantity, the signal current comprising an AC current and a DC current; a dynamic range enhancement circuit having a digital control signal input terminal and producing a variable opposition current in response to a digital signal applied to the digital control signal input terminal; an amplifier; an analog to digital converter in electrical communication with the amplifier; and a digital feedback circuit in communication with the output terminal of the analog to digital converter and in electrical communication with the digital control signal input terminal of the dynamic range enhancement circuit, wherein the opposition current from the dynamic range enhancement circuit is set substantially equal to the DC current portion of the signal current from the transducer.</p>
  </abstract>
  <legal-data date-changed="20151002">
    <legal-event sequence="1">
      <publication-date>
        <date>20150825</date>
      </publication-date>
      <event-code-1>AS</event-code-1>
      <legal-description>ASSIGNMENT</legal-description>
      <status-identifier>N</status-identifier>
      <docdb-publication-number> US  2015257708A1</docdb-publication-number>
      <docdb-application-id>444511096</docdb-application-id>
      <new-owner>MASSACHUSETTS INSTITUTE OF TECHNOLOGY, MASSACHUSET</new-owner>
      <free-text-description>ASSIGNMENT OF ASSIGNORS INTEREST;ASSIGNORS:WINOKUR, ERIC STEVEN;SODINI, CHARLES G.;SIGNING DATES FROM 20140509 TO 20140519;REEL/FRAME:036407/0887</free-text-description>
    </legal-event>
    <legal-event sequence="2">
      <publication-date>
        <date>20150825</date>
      </publication-date>
      <event-code-1>AS</event-code-1>
      <legal-description>ASSIGNMENT</legal-description>
      <status-identifier>N</status-identifier>
      <docdb-publication-number> US  2015257708A1</docdb-publication-number>
      <docdb-application-id>444511096</docdb-application-id>
      <new-owner>ANALOG DEVICES, INC., MASSACHUSETTS</new-owner>
      <free-text-description>ASSIGNMENT OF ASSIGNORS INTEREST;ASSIGNOR:O'DWYER, TOM;REEL/FRAME:036407/0898</free-text-description>
      <effective-date>
        <date>20150203</date>
      </effective-date>
    </legal-event>
  </legal-data>
  <description id="descr_eng" lang="eng" format="original" date-changed="20150917">
    <related-apps>
      <heading id="h-00001-en" level="1">RELATED APPLICATIONS</heading>
      <p id="p-00001-en" num="0001">This application claims priority to U.S. Provisional Application 61/952,623 filed Mar. 13, 2014, which is herein incorporated by reference.</p>
    </related-apps>
    <summary>
      <heading id="h-00002-en" level="1">FIELD OF THE INVENTION</heading>
      <p id="p-00002-en" num="0002">The invention relates generally to signal processing, and more specifically to extending the dynamic range of a signal.</p>
      <heading id="h-00003-en" level="1">BACKGROUND OF THE INVENTION</heading>
      <p id="p-00003-en" num="0003">Low amplitude signals are frequently obscured by the noise generated by a sensor of the signal. Thus, small changes in the actual signal are masked. One way around this problem is to extend the dynamic range of the signal by amplification.</p>
      <p id="p-00004-en" num="0004">One such signal having a small change in amplitude relative to the underlying background signal is generated by photoplethysmography (PPG) measurements. In these measurements, light is used to measure the changes in vascular blood volume generally in a peripheral part of the body. The volume of blood in that body part, such as a finger, changes during each heartbeat.</p>
      <p id="p-00005-en" num="0005">In a typical embodiment of a photoplethysmographic system <b>10</b> (<figref>FIG. 1</figref>), light from a light source <b>14</b>, such as a light emitting diode <b>14</b>, is either transmitted through or reflected from the internal vasculature (only through shown for clarity) and detected by a photodetector <b>22</b>. Generally the light source <b>14</b> actually comprises a red LED and an InfraRed (IR) LED (not shown). The signal from the photodetector <b>22</b> is amplified by an amplifier <b>24</b>, demodulated by demodulator <b>26</b> so that the signals from the red and IR LEDs can be separated, low-pass filtered <b>28</b>, and converted to digital form by an analog-to-digital converter <b>30</b>. The digitized signal is processed by a microprocessor <b>32</b> and the PPG measurements displayed by an output device <b>34</b>. The microprocessor also determines when the LED lights <b>14</b> should be turned on and controls the illumination using an LED driver circuit <b>36</b>. The electrical signal from the photodetector varies over the heart beat cycle and is analyzed by the processor using signal processing techniques.</p>
      <p id="p-00006-en" num="0006">One way known to the prior art to increase the dynamic range of the signal from the photodetector is shown in <figref>FIG. 2</figref>. This embodiment involves using an analog error amplifier <b>40</b> in a feedback loop with a main amplifier <b>44</b> and photodiode <b>38</b>. This error amplifier <b>40</b> controls a transistor <b>42</b> which generates a current that cancels the static current of the photodiode <b>38</b>. The error amplifier <b>40</b> tries to maintain the output of the main amplifier <b>44</b> at a specific voltage that is typically at the midsupply voltage of the system. The pass-band of the circuit is dependent upon the amount of current sourced by the transistor. Because PPG signals are typically low frequency, it is difficult to generate a pole close enough to DC in an integrated circuit to make the pass band of the circuit begin at 1 Hz. Thus, these systems frequently infringe on the bandwidth of interest and are inherently lossy.</p>
      <p id="p-00007-en" num="0007">What is needed is a system that permits expanded dynamic range while having components that permit it to be constructed in a small package such as an integrated circuit for portable use.</p>
      <heading id="h-00004-en" level="1">SUMMARY OF THE INVENTION</heading>
      <p id="p-00008-en" num="0008">In one aspect, the invention relates to a circuit for expanding a dynamic range. In one embodiment, the circuit includes a transducer generating a signal current on an output terminal in response to a physical quantity, the signal current comprising an AC current and a DC current; a dynamic range enhancement circuit having a digital control signal input terminal and producing a variable opposition current at an output terminal in response to a digital signal applied to the digital control signal input terminal, the output terminal of the dynamic range enhancement circuit being in electrical communication with the transducer output terminal; an amplifier having a input terminal and an output terminal, the input terminal of the amplifier in electrical communication with the output terminal of the dynamic range enhancement circuit and the transducer output terminal; an analog to digital converter having an input terminal in electrical communication with the output terminal of the amplifier and having an output terminal; and a digital feedback circuit having an input terminal in electrical communication with the output terminal of the analog to digital converter and having an output terminal in electrical communication with the digital control signal input terminal of the dynamic range enhancement circuit, wherein the opposition current from the dynamic range enhancement circuit is set substantially equal to the DC current portion of the signal current from the transducer by the digital feedback circuit in response to the difference between DC current portion of the signal current and the opposition current. In another embodiment, the transducer is a photodetector. In yet another embodiment, the transducer is a photodiode. In still yet another embodiment, the amplifier is configured as a switched integrator. In another embodiment, the amplifier is configured as a resistive transimpedance amplifier.</p>
      <p id="p-00009-en" num="0009">In another aspect, the invention relates to a photoplethysmograph circuit with an expanded dynamic range. In one embodiment, the photoplethysmograph circuit includes a receiver portion including a transducer generating a signal current on an output terminal in response to a physical quantity, the signal current comprising an AC current and a DC current; a dynamic range enhancement circuit having a digital control signal input terminal and producing a variable opposition current at an output terminal in response to a digital signal applied to the digital control signal input terminal, the output terminal of the dynamic range enhancement circuit being in electrical communication with the transducer output terminal; an amplifier having a input terminal and an output terminal, the input terminal of the amplifier in electrical communication with the output terminal of the dynamic range enhancement circuit and the transducer output terminal; an analog to digital converter having an input terminal in electrical communication with the output terminal of the amplifier and having an output terminal; and a digital feedback circuit having an input terminal in electrical communication with the output terminal of the analog to digital converter and having an output terminal in electrical communication with the digital control signal input terminal of the dynamic range enhancement circuit, wherein the opposition current from the dynamic range enhancement circuit is set substantially equal to the DC current portion of the signal current from the transducer by the digital feedback circuit in response to the difference between DC current portion of the signal current and the opposition current; and a light source portion comprising: one or more light sources, each with a different wavelength; and an intensity control in electrical communication with each light source, wherein the intensity control is adjusted to pulse each light source; and wherein the light source is positioned such that at least some fraction of the light transmitted from the light source is received by the transducer.</p>
      <p id="p-00010-en" num="0010">In another embodiment, the transducer is a photodetector. In yet another embodiment, the photodetector is a photodiode. In still yet another embodiment, the light source is a light emitting diode. In one embodiment, the light received by the transducer from the light source is light transmitted through a bodily tissue. In another embodiment, the light received by the transducer from the light source is light reflected by a bodily tissue. In yet another embodiment, the amplifier is configured as a switch integrator. In another embodiment, the amplifier is configured as a resistive transimpedance amplifier.</p>
      <p id="p-00011-en" num="0011">In another aspect, the invention relates to a dynamic range enhancement circuit. In one embodiment, the circuit includes a clock generating two non-overlapping clock output signals; a variable capacitor having a ground terminal in electrical communication with ground, a control terminal which controls the capacitance of the variable capacitor, and an input terminal; a first switch, including an input terminal in communication with a voltage source, a control terminal in electrical communication with one of the non-overlapping clock output signals, and an output terminal in electrical communication with the input terminal of the variable capacitor; a second switch, comprising an output terminal, a control terminal in electrical communication with the other of the non-overlapping clock output signals, and an input terminal in electrical communication with the output terminal of the first switch and in electrical communication with the input terminal of the variable capacitor, wherein the first clock signal causes the first switch to connect the input terminal of the variable capacitor to the voltage source, and wherein the second clock signal causes the second switch to connect the input terminal of the variable capacitor to a current sink.</p>
    </summary>
    <description-of-drawings>
      <heading id="h-00005-en" level="1">BRIEF DESCRIPTION OF THE DIAGRAMS</heading>
      <p id="p-00012-en" num="0012">
        <figref>FIG. 1</figref> is a schematic diagram of photoplethysmograph circuit known to the prior art;</p>
      <p id="p-00013-en" num="0013">
        <figref>FIG. 2</figref> is a schematic diagram of an embodiment of a dynamic range enhancer (DRE) circuit known to the prior art;</p>
      <p id="p-00014-en" num="0014">
        <figref>FIG. 3</figref> is a schematic diagram of an embodiment of a dynamic range enhancer circuit using an integrator constructed in accordance with the invention;</p>
      <p id="p-00015-en" num="0015">
        <figref>FIG. 3(</figref>
        <i>a</i>) is a schematic diagram of another embodiment of a dynamic range enhancer circuit using a resistive transimpedance amplifier constructed in accordance with the invention;</p>
      <p id="p-00016-en" num="0016">
        <figref>FIG. 4</figref> is a flow diagram of an embodiment of the control of the current in the circuit of <figref>FIGS. 3 and 3(</figref><i>a</i>); and</p>
      <p id="p-00017-en" num="0017">
        <figref>FIG. 5</figref> is a schematic diagram of an embodiment of the DRE circuit of the invention.</p>
    </description-of-drawings>
    <detailed-desc>
      <heading id="h-00006-en" level="1">DESCRIPTION OF A PREFERRED EMBODIMENT</heading>
      <p id="p-00018-en" num="0018">A digitally assisted dynamic range enhancer is a circuit type and technique that can be used to separate static and time varying signals from a sensor. This is particularly important when the static component is much larger than the time varying component. Referring to <figref>FIG. 3</figref>, the device shown may be used in a photoplethysmogram (PPG) front end <b>10</b>′, which comprises the dynamic range enhancer circuit <b>50</b>, a photodiode <b>22</b>′, and an integrating transimpedance (main) amplifier <b>54</b>. In the configuration shown, photoplethysmogram signals typically have static or DC components that are 25× to 400× larger than their time varying components. For such a use, it is desirable to design the circuit such that it may be constructed as a small package such as an integrated circuit.</p>
      <p id="p-00019-en" num="0019">In more detail, when the two LEDs <b>14</b>, <b>14</b>′ (in one embodiment, red and IR respectively) are turned on, the photodiode <b>22</b>′ generates a photocurrent I<sub>ph</sub>. In other embodiments, other wavelengths and other numbers of LEDs are used. The dynamic range enhancer <b>50</b> is also turned on, which generates a current I<sub>st </sub>in the opposite direction to the photodiode current I<sub>ph</sub>. The resulting remaining current, I<sub>Res </sub>equal to (I<sub>ph</sub>−I<sub>st</sub>), is integrated by the amplifier <b>52</b>, as part of a switched integrator <b>54</b>, and the resulting output of the switched integrator is digitized by an A/D converter or ADC <b>58</b>. Amplifier <b>54</b>, in one embodiment, is a switched integrator topology. In this arrangement, when the circuit is not integrating, termed the first configuration, the reset switch <b>53</b> is closed and the I<sub>Res </sub>switch <b>55</b> is open. Once the LEDs <b>14</b>, <b>14</b>′ turn on, typically sequentially, the reset switch <b>53</b> opens and the I<sub>Res </sub>switch <b>55</b> closes to integrate the signal, termed the second configuration. The switches remain in the second configuration until the A/D <b>58</b> has sampled the output of the switched integrator <b>54</b>, at which time the switches return to the first configuration. In one embodiment, the output of the A/D converter is decimated <b>59</b> by a factor of M and is output <b>60</b> as data. The output of the A/D converter also is fed back to the dynamic range enhancer <b>50</b> and the LED drivers <b>63</b>, <b>63</b>′ respectively, through digital feedback modules <b>62</b>′. In another embodiment, only one LED driver <b>63</b> is used and the output of the driver is switched to control both LEDs. The digital feedback modules <b>62</b>, <b>62</b>′ are integrated processing circuits executing the algorithm of <figref>FIG. 4</figref>, as explained below.</p>
      <p id="p-00020-en" num="0020">Using this technique allows the amplifier gain to be much larger than typical, while being powered by a low voltage supply. This is because the amplifier <b>52</b> is not being saturated by the large static component of the input signal. The current of the dynamic range enhancer <b>50</b> is set in digital steps by the digital feedback module <b>62</b> so that the output of the system is within the power supply rails of the amplifier <b>52</b>.</p>
      <p id="p-00021-en" num="0021">Referring to <figref>FIG. 3(</figref><i>a</i>), in another embodiment the switched integrator <b>54</b> (<figref>FIG. 3)</figref> is replaced with a resistive transimpedance amplifier configuration <b>54</b>′. In this embodiment, output of the transimpedance amplifier <b>52</b> is connected to one of its inputs through a resistor <b>56</b>, instead of switch <b>53</b> (<figref>FIG. 3</figref>).</p>
      <p id="p-00022-en" num="0022">In operation, and referring to <figref>FIGS. 3</figref>, <b>3</b>(<i>a</i>) and <b>4</b>, if the digitized output V<sub>out </sub>of the amplifier <b>54</b> (Step <b>16</b>) is greater than a minimum threshold (Step <b>20</b>), and less than a maximum threshold (Step <b>24</b>), then the digital feedback <b>62</b>, <b>62</b>′ will not change either I<sub>st </sub>or I<sub>LED</sub>, respectively, and the algorithm loops to obtain the next value (Step <b>26</b>). If, however, V<sub>out </sub>is below a minimum threshold (Step <b>20</b>), the algorithm determines if the LED current I<sub>LED </sub>can be increased (Step <b>30</b>). If it can, then the feedback <b>62</b> will increase I<sub>LED </sub>(Step <b>34</b>) and loop for the next sample (Step <b>36</b>). If I<sub>LED </sub>is already at a maximum (Step <b>38</b>), then the algorithm determines if sufficient time has passed, for example 1.5 sec (Step <b>39</b>), and if not, loops to obtain another signal (Step <b>40</b>). If sufficient time has passed, the algorithm decreases I<sub>st</sub>, resets I<sub>LED </sub>to zero (Step <b>42</b>), and loops for another value (Step <b>40</b>).</p>
      <p id="p-00023-en" num="0023">Similarly, if V<sub>out </sub>is greater than a maximum threshold, the algorithm determines if I<sub>LED </sub>can be decreased (Step <b>44</b>). If it can, then the algorithm will decrease I<sub>LED </sub>(Step <b>48</b>) and wait for the next sample (Step <b>40</b>). If I<sub>LED </sub>is already at a minimum threshold (Step <b>50</b>), then the algorithm determines if sufficient time has passed (Step <b>54</b>). If sufficient time has not passed, the algorithm loops for a new value ((Step <b>40</b>). If sufficient time has passed, the algorithm increases I<sub>st</sub>, resets I<sub>LED </sub>to zero (Step <b>58</b>), and loops for the next value (Step <b>40</b>).</p>
      <p id="p-00024-en" num="0024">This digitally-assisted analog technique has several advantages. First, compared to the prior art, which in one embodiment was limited to subtracting 3.240 μA, the current invention can subtract large amounts of DC current, because the DRE block can be implemented as a tunable current source.</p>
      <p id="p-00025-en" num="0025">Another advantage to using a digitally assisted analog technique to cancel static current over the analog error amplifier method occurs because the error amplifier <b>40</b> (<figref>FIG. 2</figref>) is trying to maintain the output of the main amplifier <b>44</b> (<figref>FIG. 2</figref>) to a specific voltage value, the error amplifier <b>40</b> adds a zero into the frequency domain of the PPG signal at 0.0 Hz. However, the PPG signal band of interest is between 0.1 Hz and 10 Hz, which means that a low frequency pole at 0.1 Hz or below is required to not interfere with the signal bandwidth. This low frequency pole is very difficult to achieve in an integrated circuit chip, and frequently the low frequency pole is higher than 0.1 Hz, reducing the overall gain of the PPG signal. However, when using the present digitally assisted approach, the output of the amplifier is not maintained at a specific voltage, rather it is simply maintained within the rails of the amplifier. Therefore, a zero is not introduced at 0 Hz and the bandwidth of interest is not reduced by the signal chain, allowing for large gains across the entire band of interest.</p>
      <p id="p-00026-en" num="0026">Still another advantage for using a digitally assisted analog technique is that it is inherently substantially lossless. When using the prior art method shown in <figref>FIG. 2</figref>, the control is an all-analog loop, so the amount of current subtracted from the photodiode <b>38</b> is unknown. However, when using a digitally assisted approach, there are set, specific values of the subtraction current that are controlled by the user. Therefore, the total current (static and time-varying) of the photodiode is known, which, in many instances of PPG, is an important piece of information.</p>
      <p id="p-00027-en" num="0027">Further, although this circuit is discussed in conjunction with a transducer that produces a large DC component relative to a small AC component, it is also possible to use the circuit and technique with a transducer that produces only DC signals. In such a case, the technique can be used to remove a portion of the DC component to thereby improve the resolution of subsequent A/D conversion.</p>
      <p id="p-00028-en" num="0028">In more detail, the dynamic range enhancer, in one embodiment, is an 8-bit switched capacitor current source constructed to generate 100 μA of current. Referring to <figref>FIG. 5</figref>, in one embodiment, the DRE <b>50</b> has one input that is connected to a system clock <b>70</b> which is used by the DRE <b>50</b> to form two non-overlapping clock signals <b>74</b>, <b>78</b>. Each signal is used to open and close a respective switch <b>82</b>, <b>84</b>. One terminal of the first switch <b>82</b> is connected to a supply voltage <b>89</b>. The other terminal of the first switch <b>82</b> is connected to one terminal of a variable capacitor <b>88</b>. The capacitance of the variable capacitor <b>88</b> is controlled by the digital feedback module <b>62</b>. The other terminal of the variable capacitor <b>88</b> is connected to ground.</p>
      <p id="p-00029-en" num="0029">The second terminal of the second switch <b>84</b> is connected to one terminal of the photodiode <b>22</b>′ and one terminal of the amplifier <b>52</b> through switch <b>55</b>′. The two non-overlapping clock pulses <b>74</b> and <b>78</b> alternately open and close switches <b>82</b> and <b>84</b> so as to alternately charge and discharge the variable capacitor <b>88</b>.</p>
      <p id="p-00030-en" num="0030">When the system clock <b>70</b> operates at 6 MHz, the least significant bit (LSB) of variable capacitor <b>88</b> has a value of 73 fF. The voltage source, V<sub>DD </sub><b>89</b>, is 1.8V and the voltage at the cathode of the photodiode <b>22</b>′ is set by the integrating amplifier <b>52</b> virtual ground to equal 0.9V. The Charge <b>82</b> and Dump <b>84</b> switches are both 25 μm/0.18 μm line widths to reduce the RC time constant between the switch resistance and the capacitance of variable capacitor <b>88</b>. This ensures that the variable capacitor completely charges and discharges for all values of the variable capacitor <b>88</b>.</p>
      <p id="p-00031-en" num="0031">It is to be understood that the figures and descriptions of the invention have been simplified to illustrate elements that are relevant for a clear understanding of the invention, while eliminating, for purposes of clarity, other elements. Those of ordinary skill in the art will recognize, however, that these and other elements may be desirable. However, because such elements are well known in the art, and because they do not facilitate a better understanding of the invention, a discussion of such elements is not provided herein. It should be appreciated that the figures are presented for illustrative purposes, and not as construction drawings. Omitted details and modifications or alternative embodiments are within the purview of persons of ordinary skill in the art.</p>
      <p id="p-00032-en" num="0032">The invention may be embodied in other specific forms without departing from the spirit or essential characteristics thereof. The foregoing embodiments are therefore to be considered in all respects illustrative rather than limiting on the invention described herein. Scope of the invention is thus indicated by the appended claims rather than by the foregoing description, and all changes which come within the meaning and range of equivalency of the claims are intended to be embraced therein.</p>
    </detailed-desc>
  </description>
  <us-claim-statement>What is claimed is:</us-claim-statement>
  <claims id="claims_eng" lang="eng" format="original" date-changed="20150917">
    <claim num="1" id="clm-00001-en" independent="true">
      <claim-text>
        <b>1</b>. A circuit for expanding a dynamic range comprising:
<claim-text>a transducer generating a signal current on an output terminal in response to a physical quantity, the signal current comprising an AC current and a DC current;</claim-text><claim-text>a dynamic range enhancement circuit having a digital control signal input terminal and producing a variable opposition current at an output terminal in response to a digital signal applied to the digital control signal input terminal, the output terminal of the dynamic range enhancement circuit being in electrical communication with the transducer output terminal;</claim-text><claim-text>a transimpendance amplifier having a input terminal and an output terminal, the input terminal of the transimpendnce amplifier in electrical communication with the output terminal of the dynamic range enhancement circuit and the transducer output terminal;</claim-text><claim-text>an analog to digital converter having an input terminal in electrical communication with the output terminal of the transimpedance amplifier and having an output terminal; and</claim-text><claim-text>a digital feedback circuit having an input terminal in electrical communication with the output terminal of the analog to digital converter and having an output terminal in electrical communication with the digital control signal input terminal of the dynamic range enhancement circuit,</claim-text><claim-text>wherein the opposition current from the dynamic range enhancement circuit is set substantially equal to the DC current portion of the signal current from the transducer by the digital feedback circuit in response to the difference between DC current portion of the signal current and the opposition current.</claim-text></claim-text>
    </claim>
    <claim num="2" id="clm-00002-en">
      <claim-text>
        <b>2</b>. The circuit of <claim-ref idref="clm-00001-en">claim 1</claim-ref> wherein the transimpendance amplifier is configured as a switched integrator.</claim-text>
    </claim>
    <claim num="3" id="clm-00003-en">
      <claim-text>
        <b>3</b>. The circuit of <claim-ref idref="clm-00001-en">claim 1</claim-ref> wherein the transimpedance amplifier is configured as a resistive transimpedance amplifier.</claim-text>
    </claim>
    <claim num="4" id="clm-00004-en">
      <claim-text>
        <b>4</b>. The circuit of <claim-ref idref="clm-00001-en">claim 1</claim-ref> wherein the transducer is a photodetector.</claim-text>
    </claim>
    <claim num="5" id="clm-00005-en">
      <claim-text>
        <b>5</b>. The circuit of <claim-ref idref="clm-00004-en">claim 4</claim-ref> wherein the transducer is a photodiode.</claim-text>
    </claim>
    <claim num="6" id="clm-00006-en" independent="true">
      <claim-text>
        <b>6</b>. A photoplethysmograph circuit with an expanded dynamic range comprising:
<claim-text>a receiver portion comprising:
<claim-text>a transducer generating a signal current on an output terminal in response to a physical quantity, the signal current comprising an AC current and a DC current;</claim-text><claim-text>a dynamic range enhancement circuit having a digital control signal input terminal and producing a variable opposition current at an output terminal in response to a digital signal applied to the digital control signal input terminal, the output terminal of the dynamic range enhancement circuit being in electrical communication with the transducer output terminal;</claim-text><claim-text>a transimpedance amplifier having an input terminal and an output terminal, the input terminal of the transimpedance amplifier in electrical communication with the output terminal of the dynamic range enhancement circuit and the transducer output terminal;</claim-text><claim-text>an analog to digital converter having an input terminal in electrical communication with the output terminal of the transimpedance amplifier and having an output terminal; and</claim-text><claim-text>a first digital feedback circuit having an input terminal in electrical communication with the output terminal of the analog to digital converter and having an output terminal in electrical communication with the digital control signal input terminal of the dynamic range enhancement circuit,</claim-text><claim-text>wherein the opposition current from the dynamic range enhancement circuit is set substantially equal to the DC current portion of the signal current from the transducer by the first digital feedback circuit in response to the difference between DC current portion of the signal current and the opposition current; and</claim-text></claim-text><claim-text>a light source module comprising:
<claim-text>one or more light sources each with a different wavelength; and</claim-text><claim-text>an intensity control in electrical communication with each light source,</claim-text><claim-text>wherein the intensity control is adjusted to pulse each light source; and</claim-text><claim-text>wherein each light source is positioned such that light transmitted from the light source is received by the transducer.</claim-text></claim-text></claim-text>
    </claim>
    <claim num="7" id="clm-00007-en">
      <claim-text>
        <b>7</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the transimpedance amplifier is configured as a switched integrator.</claim-text>
    </claim>
    <claim num="8" id="clm-00008-en">
      <claim-text>
        <b>8</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the transimpedance amplifier is configured as a resistive transimpedance amplifier.</claim-text>
    </claim>
    <claim num="9" id="clm-00009-en">
      <claim-text>
        <b>9</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the transducer is a photodetector.</claim-text>
    </claim>
    <claim num="10" id="clm-00010-en">
      <claim-text>
        <b>10</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00009-en">claim 9</claim-ref> wherein the photodetector is a photodiode.</claim-text>
    </claim>
    <claim num="11" id="clm-00011-en">
      <claim-text>
        <b>11</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein each of the light sources is a respective light emitting diode.</claim-text>
    </claim>
    <claim num="12" id="clm-00012-en">
      <claim-text>
        <b>12</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the light received by the transducer from the light source is light transmitted through bodily tissue.</claim-text>
    </claim>
    <claim num="13" id="clm-00013-en">
      <claim-text>
        <b>13</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the light received by the transducer from the light source is light reflected by bodily tissue.</claim-text>
    </claim>
    <claim num="14" id="clm-00014-en">
      <claim-text>
        <b>14</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the intensity control comprises:
<claim-text>a respective driver for each light source; and</claim-text><claim-text>a second digital feedback circuit having an input terminal in electrical communication with the output terminal of the analog to digital converter and having an output terminal in electrical communication with each of the drivers.</claim-text></claim-text>
    </claim>
    <claim num="15" id="clm-00015-en">
      <claim-text>
        <b>15</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the output terminal of the A/D converter is in communication with the input terminal of a decimator.</claim-text>
    </claim>
    <claim num="16" id="clm-00016-en">
      <claim-text>
        <b>16</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the decimator has an output terminal in communication with a serial dataout circuit.</claim-text>
    </claim>
    <claim num="17" id="clm-00017-en">
      <claim-text>
        <b>17</b>. The photoplethysmograph circuit of <claim-ref idref="clm-00006-en">claim 6</claim-ref> wherein the intensity control comprises an independent intensity controller for each respective LED.</claim-text>
    </claim>
    <claim num="18" id="clm-00018-en" independent="true">
      <claim-text>
        <b>18</b>. A dynamic range enhancement circuit comprising:
<claim-text>a clock;</claim-text><claim-text>a DRE clock circuit generating two non-overlapping clock output signals;</claim-text><claim-text>a variable capacitor having a ground terminal in electrical communication with ground, a control terminal which controls the capacitance of the variable capacitor, and an input terminal.</claim-text><claim-text>a first switch, comprising an input terminal in communication with a voltage source, a control terminal in electrical communication with one of the non-overlapping clock output signals, and an output terminal in electrical communication with the input terminal of the variable capacitor;</claim-text><claim-text>a second switch, comprising an output terminal, a control terminal in electrical communication with the other of the non-overlapping clock output signals, and an input terminal in electrical communication with the output terminal of the first switch and in electrical communication with the input terminal of the variable capacitor,</claim-text><claim-text>wherein the first clock signal causes the first switch to connect the input terminal of the variable capacitor to the voltage source, and</claim-text><claim-text>wherein the second clock signal causes the second switch to connect the input terminal of the variable capacitor to a current sink.</claim-text></claim-text>
    </claim>
    <claim num="19" id="clm-00019-en">
      <claim-text>
        <b>19</b>. The dynamic range enhancement circuit of <claim-ref idref="clm-00018-en">claim 18</claim-ref> wherein the variable capacitor is controlled by a digital feedback unit. </claim-text>
    </claim>
  </claims>
  <drawings id="drawings" format="original">
    <figure num="1">
      <img he="N/A" wi="N/A" file="US20150257708A1_00001.PNG" alt="clipped image" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00000.TIF" />
    </figure>
    <figure num="2">
      <img he="N/A" wi="N/A" file="US20150257708A1_00002.PNG" alt="drawing sheet" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00001.TIF" />
    </figure>
    <figure num="3">
      <img he="N/A" wi="N/A" file="US20150257708A1_00003.PNG" alt="drawing sheet" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00002.TIF" />
    </figure>
    <figure num="4">
      <img he="N/A" wi="N/A" file="US20150257708A1_00004.PNG" alt="drawing sheet" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00003.TIF" />
    </figure>
    <figure num="5">
      <img he="N/A" wi="N/A" file="US20150257708A1_00005.PNG" alt="drawing sheet" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00004.TIF" />
    </figure>
    <figure num="6">
      <img he="N/A" wi="N/A" file="US20150257708A1_00006.PNG" alt="drawing sheet" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00005.TIF" />
    </figure>
    <figure num="7">
      <img he="N/A" wi="N/A" file="US20150257708A1_00007.PNG" alt="thumbnail image" img-content="drawing" img-format="png" original="US20150257708A1-20150917-D00000.TIF" />
    </figure>
  </drawings>
  <image file="US20150257708A1.PDF" type="pdf" size="583837" pages="11" />
</lexisnexis-patent-document>