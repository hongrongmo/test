<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd">

<struts-config>

  <!-- ========== Form Bean Definitions =================================== -->
  <form-beans>

    <form-bean name="tokenForm" type="org.apache.struts.action.DynaActionForm">
			<form-property name="hours" type="java.lang.Integer"/>
			<form-property name="days" type="java.lang.Integer"/>
			<form-property name="tokenId" type="java.lang.String"/>
			<form-property name="note" type="java.lang.String"/>
    </form-bean>

    <!--  form bean -->
    <form-bean name="navForm" type="org.apache.struts.action.DynaActionForm">
			<form-property name="params" type="java.util.Map"/>
    </form-bean>

    <form-bean name="territoryForm" type="org.apache.struts.action.DynaActionForm">
      <form-property name="territoryid" type="java.lang.String"/>
      <form-property name="selectedTypes" type="java.lang.String[]"/>
      <form-property name="selectedIndustries" type="java.lang.String[]"/>
      <form-property name="searchResults" type="java.util.Collection"/>
      <form-property name="territory" type="org.ei.struts.backoffice.territory.Territory"/>
    </form-bean>

    <form-bean name="loginForm" type="org.ei.struts.backoffice.login.LoginForm"/>
    <form-bean name="contactForm" type="org.ei.struts.backoffice.contact.ContactForm"/>
    <form-bean name="contractForm" type="org.ei.struts.backoffice.contract.ContractForm"/>
    <form-bean name="itemForm" type="org.ei.struts.backoffice.contract.item.ItemForm"/>
<!--    <form-bean name="noteForm" type="org.ei.struts.backoffice.contract.notes.NoteForm"/> -->
    <form-bean name="customerForm" type="org.ei.struts.backoffice.customer.CustomerForm"/>
    <form-bean name="searchCustomerForm" type="org.ei.struts.backoffice.customer.SearchCustomerForm"/>
    <form-bean name="userForm" type="org.ei.struts.backoffice.user.UserForm"/>
    <form-bean name="localholdingsForm" type="org.ei.struts.backoffice.customeroptions.localholdings.LocalHoldingsForm"/>
    <form-bean name="ddsForm" type="org.ei.struts.backoffice.customeroptions.dds.DDSForm"/>
    <form-bean name="ev2Form" type="org.ei.struts.backoffice.customeroptions.village.ev2.Ev2Form"/>
    <form-bean name="cvForm" type="org.ei.struts.backoffice.customeroptions.village.cv.CvForm"/>
    <form-bean name="pv2Form" type="org.ei.struts.backoffice.customeroptions.village.pv2.Pv2Form"/>
    <form-bean name="enc2Form" type="org.ei.struts.backoffice.customeroptions.village.enc2.Enc2Form"/>
    <form-bean name="ipForm" type="org.ei.struts.backoffice.credentials.ip.IpForm"/>
    <form-bean name="usernameForm" type="org.ei.struts.backoffice.credentials.username.UsernameForm"/>
    <form-bean name="gatewayForm" type="org.ei.struts.backoffice.credentials.gateway.GatewayForm"/>

    <!-- not currently in use -->
    <form-bean name="regionForm" type="org.ei.struts.backoffice.region.RegionForm"/>

  </form-beans>


  <!-- ========== Global Forward Definitions ============================== -->
  <global-forwards>
    <forward  name="login"              path="/logon.jsp"/>

    <forward  name="menu"               path="/menu.do"/>
    <forward  name="logout"             path="/logout.do"/>
    <forward  name="search"             path="/search.do"/>
    <forward  name="report"             path="/report.do"/>
    <forward  name="territory"          path="/territory.do"/>

    <forward  name="9004"               path="/products/dds.jsp"/>
    <forward  name="dds"                path="/products/dds.jsp"/>

    <forward  name="4000"               path="/products/ev2.jsp"/>
    <forward  name="ev2"                path="/products/ev2.jsp"/>

    <forward  name="4400"               path="/products/cv.jsp"/>
    <forward  name="cv"                 path="/products/cv.jsp"/>

    <forward  name="4100"               path="/products/pv2.jsp"/>
    <forward  name="pv2"                path="/products/pv2.jsp"/>

    <forward  name="4600"               path="/products/enc2.jsp"/>
    <forward  name="enc2"               path="/products/enc2.jsp"/>

    <forward  name="ip"                 path="/ip.jsp"/>
    <forward  name="gateway"            path="/gateway.jsp"/>
    <forward  name="username"           path="/username.jsp"/>

    <forward  name="localholdings"      path="/localholdings.jsp"/>
    <forward  name="user"               path="/user.jsp"/>
    <forward  name="customer"           path="/customer.jsp"/>
    <forward  name="contact"            path="/contact.jsp"/>
    <forward  name="region"             path="/region.jsp"/>
    <forward  name="contract"           path="/contract.jsp"/>
    <forward  name="item"               path="/item.jsp"/>

    <forward  name="editUser"           path="/editUser.do?action=Edit"/>
    <forward  name="listUsers"          path="/editUser.do?action=List"/>
    <forward  name="createUser"         path="/editUser.do?action=Create"/>

    <forward  name="editContact"        path="/editContact.do?action=Edit"/>
    <forward  name="listContacts"       path="/editContact.do?action=List"/>
    <forward  name="createContact"      path="/editContact.do?action=Create"/>

    <forward  name="listConsortia"          path="/editCustomer.do?action=List&amp;consortiums=true"/>

    <forward  name="listCustomers"          path="/editCustomer.do?action=List"/>
    <forward  name="editCustomer"           path="/editCustomer.do?action=Edit"/>
    <forward  name="createCustomer"         path="/editCustomer.do?action=Create"/>

    <forward  name="createContract"         path="/editContract.do?action=Create"/>
    <forward  name="editContract"           path="/editContract.do?action=Edit"/>
    <forward  name="renewContract"          path="/renewContract.do?action=Renew"/>

    <forward  name="editLocalHoldings"      path="/editLocalHoldings.do?action=Edit"/>
    <forward  name="createLocalHoldings"    path="/editLocalHoldings.do?action=Create"/>
    <forward  name="deleteLocalHoldings"    path="/deleteLocalHoldings.do?action=Delete"/>

    <forward  name="editItem"               path="/editItem.do?action=Edit"/>

    <forward  name="editOptions"            path="/editOptions.do?action=Edit"/>
    <forward  name="createOptions"          path="/editOptions.do?action=Create"/>

    <forward  name="editAccess"             path="/editAccess.do?action=Edit"/>
    <forward  name="createAccess"           path="/editAccess.do?action=Create"/>
    <forward  name="deleteAccess"           path="/deleteAccess.do?action=Delete"/>

    <!-- not currently in use -->
    <forward  name="editRegion"             path="/editRegion.do?action=Edit"/>
    <forward  name="createRegion"           path="/editRegion.do?action=Create"/>


		<!-- link action forwards -->
		<forward  name="support"								path="/support.do"/>
		<forward  name="edittoken"							path="/edittoken.do"/>

		<!-- input forwards -->
    <forward  name="tokenmenu"							path="/tokens/tokenmenu.jsp"/>
    <forward  name="update"									path="/tokens/update.jsp"/>
  </global-forwards>

  <!-- ========== Action Mapping Definitions ============================== -->
  <action-mappings>

  	<action
        path="/xmlcustomer"
        type="org.ei.struts.backoffice.customer.DownloadCustomerAction"
        name="navForm"
        scope="request"
        validate="false"
        input="menu">
		</action>

 <!--   <action
        path="/xmlcustomer"
        parameter="/downloadCustomer"
        type="org.apache.struts.actions.ForwardAction"
        />
-->
    <action
        path="/tokenmenu"
        type="org.apache.struts.actions.ForwardAction"
        forward="/tokens/tokenmenu.jsp"/>

    <action
        path="/support"
        name="tokenForm"
        type="org.apache.struts.actions.ForwardAction"
        forward="/tokens/support.jsp"/>

    <action
        path="/edittoken"
        name="tokenForm"
        type="org.apache.struts.actions.ForwardAction"
        forward="/tokens/update.jsp"/>

  	<action
        path="/tokenupdate"
        type="org.ei.struts.backoffice.tokens.UpdateTokenAction"
        name="tokenForm"
				parameter="callmethod"
        scope="request"
        validate="false"
        input="update">
			<forward name="success" path="/tokens/tokenmenu.jsp"/>
		</action>

  	<action
        path="/tokensearch"
        type="org.ei.struts.backoffice.tokens.FindTokenAction"
        name="tokenForm"
				parameter="callmethod"
        scope="request"
        validate="false"
        input="tokenmenu">
			<forward name="success" path="/tokens/tokenmenu.jsp"/>
		</action>


  <!-- ========== Action Mapping Definitions ============================== -->
  <!-- ========== Action Mapping Definitions ============================== -->

     <action    path="/login"
               type="org.ei.struts.backoffice.login.LoginAction"
              scope="request"
               name="loginForm"
           validate="true"
              input="login">
      <forward name="success"               path="/menu.do"   redirect="true"/>
    </action>


     <action    path="/login"
               type="org.ei.struts.backoffice.login.LoginAction"
              scope="request"
               name="loginForm"
           validate="true"
              input="login">
      <forward name="success"               path="/menu.do"   redirect="true"/>
    </action>

    <action    path="/logout"
               type="org.ei.struts.backoffice.login.LogoutAction">
      <forward name="success"               path="/index.jsp" redirect="true"/>
    </action>

    <action    path="/search"
               type="org.apache.struts.actions.ForwardAction"
          parameter="/SearchCustomer1.jsp" />

     <action   path="/report"
               type="org.apache.struts.actions.ForwardAction"
          parameter="/report.jsp" />

    <action    path="/territory"
               type="org.apache.struts.actions.ForwardAction"
          parameter="/territory.jsp" />

    <action    path="/menu"
               type="org.apache.struts.actions.ForwardAction"
          parameter="/menu.jsp"/>

    <action    path="/editContact"
               type="org.ei.struts.backoffice.contact.EditContactAction"
               name="contactForm"
              scope="request"
           validate="false">
      <forward name="success"                path="/contact.jsp"/>
    </action>

    <action    path="/saveContact"
               type="org.ei.struts.backoffice.contact.DispatchContactLookupAction"
          parameter="method"
               name="contactForm"
              scope="request"
              roles="2"
              input="editContact"
           validate="true">
    </action>

    <action    path="/deleteContact"
               type="org.ei.struts.backoffice.contact.DispatchContactLookupAction"
          parameter="method"
               name="contactForm"
              scope="request"
              roles="2"
              input="editCustomer"
           validate="false">
    </action>

    <action    path="/editUser"
               type="org.ei.struts.backoffice.user.EditUserAction"
               name="userForm"
              scope="request"
           validate="false">
      <forward name="success"                path="/user.jsp"/>
    </action>

    <action    path="/saveUser"
               type="org.ei.struts.backoffice.user.SaveUserAction"
               name="userForm"
              scope="request"
           validate="true"
              roles="2"
              input="user">
      <forward name="success"               path="/menu.do"/>
    </action>

    <!-- not currently in use -->
    <action    path="/editRegion"
               type="org.ei.struts.backoffice.region.EditRegionAction"
               name="regionForm"
              scope="request"
           validate="false">
      <forward name="success"               path="/region.jsp"/>
    </action>

    <!-- not currently in use -->
    <action    path="/saveRegion"
               type="org.ei.struts.backoffice.region.SaveRegionAction"
               name="regionForm"
              scope="request"
           validate="true"
              input="region">
      <forward name="success"               path="/menu.do"/>
    </action>

    <action    path="/editCustomer"
               type="org.ei.struts.backoffice.customer.EditCustomerAction"
               name="customerForm"
	          input="search"
              scope="request"
           validate="false">
      <forward name="success"               path="/customer.jsp"/>
    </action>

    <action    path="/saveCustomer"
               type="org.ei.struts.backoffice.customer.SaveCustomerAction"
               name="customerForm"
              scope="request"
              input="customer"
              roles="2"
           validate="true">
      <forward name="success"               path="/editCustomer.do"/>
    </action>

    <!-- ========== ======================== ================================ -->
    <action    path="/editContract"
               type="org.ei.struts.backoffice.contract.EditContractAction"
               name="contractForm"
              scope="request"
           validate="false">
      <forward name="success"               path="/contract.jsp"/>
    </action>

    <!-- wrapper for EditContract to check role for renewals -->
    <action    path="/renewContract"
              scope="request"
               name="contractForm"
               type="org.apache.struts.actions.ForwardAction"
              roles="2"
          parameter="/editContract.do" />

    <action    path="/saveContract"
               type="org.ei.struts.backoffice.contract.SaveContractAction"
               name="contractForm"
              scope="request"
          parameter="action"
              input="contract"
              roles="2"
           validate="true"/>

    <!-- action to skip contract form validation -->
    <action    path="/turnOnOffContract"
               type="org.ei.struts.backoffice.contract.SaveContractAction"
               name="contractForm"
              scope="request"
          parameter="action"
              input="contract"
              roles="2"
           validate="false"/>

    <!-- action to skip contract form validation -->
    <action    path="/addProductToContract"
               type="org.ei.struts.backoffice.contract.SaveContractAction"
               name="contractForm"
              scope="request"
          parameter="action"
              input="contract"
              roles="2"
           validate="false"/>

    <action    path="/editItem"
               type="org.ei.struts.backoffice.contract.item.EditItemAction"
               name="itemForm"
              scope="request"
           validate="false">
      <forward name="success"               path="/item.jsp"/>
    </action>

    <action    path="/saveItem"
               type="org.ei.struts.backoffice.contract.item.SaveItemAction"
               name="itemForm"
              scope="request"
              input="item"
              roles="2"
           validate="false"/>

    <action    path="/deleteItem"
               type="org.ei.struts.backoffice.contract.item.DeleteItemAction"
               name="itemForm"
              scope="request"
              input="editItem"
              roles="2"
           validate="false"/>

    <action    path="/saveNote"
               type="org.ei.struts.backoffice.contract.notes.SaveNoteAction"
               name="itemForm"
              scope="request"
              input="editItem"
              roles="2"
           validate="true">
    </action>


    <!-- ========== ======================== ================================ -->
    <action    path="/editLocalHoldings"
               type="org.ei.struts.backoffice.customeroptions.localholdings.EditLocalHoldingsAction"
               name="localholdingsForm"
              scope="request"
           validate="false">
      <forward name="success"                path="/localholdings.jsp"/>
    </action>

    <action    path="/saveLocalHoldings"
               type="org.ei.struts.backoffice.customeroptions.localholdings.SaveLocalHoldingsAction"
               name="localholdingsForm"
              scope="request"
              input="localholdings"
              roles="2"
           validate="true">
    </action>

     <action    path="/deleteLocalHoldings"
               	type="org.apache.struts.actions.ForwardAction"
              	roles="2"
             	parameter="/editLocalHoldings.do" />


    <!-- ========== ======================== ================================ -->
    <action    path="/editOptions"
               type="org.ei.struts.backoffice.customeroptions.EditOptionsAction"
               name="optionsForm"
              scope="request"
           validate="false">
    </action>

    <action    path="/saveDDS"
               type="org.ei.struts.backoffice.customeroptions.SaveOptionsAction"
               name="ddsForm"
          attribute="optionsForm"
              scope="request"
              input="dds"
              roles="2"
           validate="true">
    </action>

    <action    path="/saveEnc2"
               type="org.ei.struts.backoffice.customeroptions.SaveOptionsAction"
               name="enc2Form"
          attribute="optionsForm"
              scope="request"
              input="enc2"
              roles="2"
           validate="true">
    </action>

    <action    path="/saveEv2"
               type="org.ei.struts.backoffice.customeroptions.SaveOptionsAction"
               name="ev2Form"
          attribute="optionsForm"
              scope="request"
              input="ev2"
              roles="2"
           validate="true">
    </action>

    <action    path="/saveCv"
               type="org.ei.struts.backoffice.customeroptions.SaveOptionsAction"
               name="cvForm"
          attribute="optionsForm"
              scope="request"
              input="cv"
              roles="2"
           validate="true">
    </action>

    <action    path="/savePv2"
               type="org.ei.struts.backoffice.customeroptions.SaveOptionsAction"
               name="pv2Form"
          attribute="optionsForm"
              scope="request"
              input="pv2"
              roles="2"
           validate="true">
    </action>

    <!-- ========== ======================== ================================ -->
    <action    path="/editAccess"
               type="org.ei.struts.backoffice.credentials.access.EditAccessAction"
               name="accessForm"
              scope="request"
           validate="false">
    </action>

    <!-- wrapper for EditAccess to check role for deletion -->
    <action    path="/deleteAccess"
               type="org.apache.struts.actions.ForwardAction"
              roles="2"
         parameter="/editAccess.do" />

    <action    path="/saveIpAccess"
               type="org.ei.struts.backoffice.credentials.access.SaveAccessAction"
               name="ipForm"
          attribute="accessForm"
              scope="request"
              input="ip"
              roles="2"
           validate="true">
    </action>
    <action    path="/saveUsernameAccess"
               type="org.ei.struts.backoffice.credentials.access.SaveAccessAction"
               name="usernameForm"
          attribute="accessForm"
              scope="request"
              input="username"
              roles="2"
           validate="true">
    </action>
    <action    path="/saveGatewayAccess"
               type="org.ei.struts.backoffice.credentials.access.SaveAccessAction"
               name="gatewayForm"
          attribute="accessForm"
              scope="request"
              input="gateway"
              roles="2"
           validate="true">
    </action>
    <!-- ========== ======================== ================================ -->

    <action   path="/searchCustomer"
              type="org.ei.struts.backoffice.customer.CustomerResultsAction"
             scope="request"
              name="searchCustomerForm"
          validate="true"
             input="search">
     <forward name="success"             path="/customerSearchResults.jsp"/>
    </action>

    <action   path="/reportCustomer"
              type="org.ei.struts.backoffice.customer.CustomerResultsAction"
             scope="request"
              name="searchCustomerForm"
          validate="true"
             input="report">
     <forward name="success"             path="/reportResults.jsp"/>
    </action>

    <action   path="/territoryReport"
              type="org.ei.struts.backoffice.territory.TerritoryResultsAction"
             scope="request"
              name="territoryForm"
          validate="false"
             input="territory">
     <forward name="success"             path="/territoryResults.jsp"/>
    </action>

  </action-mappings>

  <!-- ========== Controller Configuration ================================ -->

  <controller processorClass="org.ei.struts.backoffice.BackOfficeBaseRequestProcessor">
    <!-- The "input" parameter on "action" elements is the name of a
         local or global "forward" rather than a module-relative path -->
    <set-property property="inputForward" value="true"/>
  </controller>

  <message-resources parameter="ApplicationResources"/>

  <!-- ========== Plug Ins Configuration ================================== -->
  <plug-in className="org.apache.struts.plugins.ModuleConfigVerifier"/>

  <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
    <set-property
        property="pathnames"
        value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml"/>
  </plug-in>

</struts-config>
